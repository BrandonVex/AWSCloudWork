Application Load Balancer (V2)

Application Load Balancer is on Layer 7 (HTTP)
Load balancing to multiple HTTP applications across machines (target groups)
Load balancing to  multiple applications on the same machine (containers)
support for HTTP/2 and Websocket
Support redirects (from HTTP to HTTPS)
Routing tables to different target groups
  routing based on the path in URL (/users & /posts)
  routing based on hostname in URL (one.example.com & other.ex.com)
  routing based on Query strings, headers (id=123&order=false)
ALB are great for micro services & container-based applications
Has a port mapping feature to redirect to a dynamic port in ECS

--------------------------------
Target groups

EC2 instances (can be managed by an auto scaling group) - HTTP
ECS tasks (managed by ECS itself) - HTTP
Lambda functions - HTTP request is translated into a JSON event
IP addresses - must be Private

ALB can route to multiple target groups
Health checks are at the target group level

Write a rule in the ALB routing rules to redirect to the first target group for "?platform=mobile"

----------------------------------

Good to know

Fixed hostname (XXX.region.elb.amazonaws.com)
The application servers dont see the IP of the client directly
  the true IP of the client is inserted in the header X-Forwarded-For
  We can also get port (X-Forwarded-Port) and proto (X-Forwarded-Proto)


Our clients ip is directly talking to our load balancer who than does a connection termination to the ec2 instance.

